<!--REQUIREMENTS
  comments.js
  -->
{% macro render_comment(com, moment, current_user, link=request.url) %}
  <div class='single-post'>
    <div class='post-header'>
      <ul class='post-header-list'>
        <li>
          {% if current_user.is_authenticated and current_user != com.user %}
            {% if current_user.following.filter_by(following=com.user_id).first() %}
              <i id='{{com.user_id}}' class="follow-button-comment font-link fa fa-heart fa-2x"></i>
            {% else %}
              <i id='{{com.user_id}}' class='follow-button-comment font-link fa fa-heart-o fa-2x'></i>
            {% endif %}
          {% endif %}
          <a href="{{url_for('personal.profile', id=com.user_id)}}">
            {{com.user.username}}
          </a>
        </li>
        <li>
          {{moment(com.timestamp).format('MMMM Do YYYY, h:mm:ss a')}}
        </li>
        <li>
          {% if current_user.is_authenticated %}
            {% if current_user.recommendation.filter_by(id=com.recommendation_id).first() or 
              current_user.comment.filter_by(id=com.id).first() %}
              <a class='icon-link' href="{{url_for('personal.comment_delete', id=com.id, next=link)}}">
                <i class='font-link fa fa-trash fa-2x'></i>
              </a>
            {% endif %}
            {% if current_user.id == com.user_id %}
              <a class='icon-link' href="{{url_for('personal.comment_edit', id=com.id, next=link)}}">
                <i class='font-link fa fa-pencil-square-o fa-2x'></i>
              </a>
            {% endif %}
          {% endif %}
          <a class='icon-link' href="{{url_for('main.highlight', id=com.recommendation_id)}}">
            <i class='font-link fa fa-wpforms fa-2x'></i>
          </a>
        </li>
      </ul>
    </div><!--post-header-->
    <p class='post-text'>
      {{com.text}}
    </p>
  </div><!--single-post-->
  <br/>
{% endmacro %}

{% macro initialize_comments(d_c, moment, current_user, link=request.url) %}
  <div class='list-comments'>
    {{ajax(d_c, moment, current_user, link)}}
    {% if d_c.pages != d_c.page and d_c.pages != 0 %}
      <a><p class='load-more-com'>Load More</p></a>
    {% endif %}
  </div><!--list-comments-->
{% endmacro %}

{% macro ajax(d_c, moment, current_user, link=request.url) %}
  {% for com in d_c.items %}
    {{render_comment(com, moment, current_user, link)}}
  {% endfor %}
{% endmacro %}

{% macro insert_comments(d_c, moment, current_user, link=request.url) %}
  <div class='inline-comments'>
    {{ajax(d_c, moment, current_user, link)}}
  </div><!--inline-comments-->
{% endmacro %}