{% macro render_comment(com, moment, current_user, link) %}
  <div class='single-post'>
    <div class='post-header'>
      <ul class='post-header-list'>
        <li>
          {% if current_user.is_authenticated and current_user != com.comm %}
            {% if current_user.following.filter_by(following=com.comm.id).first() %}
              <i id='{{com.comm.id}}' class="follow-button-comment font-link fa fa-heart fa-2x"></i>
            {% else %}
              <i id='{{com.comm.id}}' class='follow-button-comment font-link fa fa-heart-o fa-2x'></i>
            {% endif %}
          {% endif %}
          <a href="{{url_for('personal.profile', id=com.comment_by)}}">
            {{com.comm.username}}
          </a>
        </li>
        <li>
          {{moment(com.timestamp).format('MMMM Do YYYY, h:mm:ss a')}}
        </li>
        <li>
          {% if current_user.is_authenticated %}
            {% if current_user.posts.filter_by(id=com.posted_on).first() or 
              current_user.commented_on.filter_by(id=com.id).first() %}
              <a class='icon-link' href="{{url_for('personal.comment_delete', id=com.id, next=link)}}">
                <i class='font-link fa fa-trash fa-2x'></i>
              </a>
            {% endif %}
            {% if current_user.id == com.comment_by %}
              <a class='icon-link' href="{{url_for('personal.comment_edit', id=com.id, next=link)}}">
                <i class='font-link fa fa-pencil-square-o fa-2x'></i>
              </a>
            {% endif %}
          {% endif %}
          <a class='icon-link' href="{{url_for('main.highlight', id=com.posted_on)}}">
            <i class='font-link fa fa-wpforms fa-2x'></i>
          </a>
        </li>
      </ul>
    </div><!--post-header-->
    <p class='post-text'>
      {{com.comment}}
    </p>
  </div><!--single-post-->
  <br/>
{% endmacro %}

{% macro initialize_comments(d_c, moment, current_user) %}
  {{ajax(d_c, moment, current_user)}}
  {% if d_c.pages != d_c.page and d_c.pages != 0 %}
    <a><p id='ajax-comments' class='load-more-com'>Load More</p></a>
  {% endif %}
  <script src="{{url_for('static', filename='js/macros/comment.js')}}"></script>
{% endmacro %}

{% macro ajax(d_c, moment, current_user, link=request.url) %}
  {% for com in d_c.items %}
    {{render_comment(com, moment, current_user, link)}}
  {% endfor %}
{% endmacro %}

{% macro ajax_div_wrapper(d_c, moment, current_user, link=request.url) %}
  <div class='list-comments'>
    </br>
    {{ajax(d_c, moment, current_user, link)}}
  </div><!--list-comments-->
{% endmacro %}

{% macro search_initialize() %}
  <a><p id='ajax-comments' class='load-more-com'>Load More</p></a>
  <script src="{{url_for('static', filename='js/macros/comment.js')}}"></script>
{% endmacro %}