{% macro render_rec(rec, moment, current_user, attributes=True, link=request.url) %}
  <div class='single-post'>
    <a href="{{url_for('main.highlight', id=rec.id)}}">
      <h3 class='rec-title'>{{rec.title}}</h3>
    </a>
    <div class='post-header'>
      <ul class='post-header-list'>
        <li>
          {% if current_user.is_authenticated and current_user != rec.author %}
            {% if current_user.following.filter_by(following=rec.author.id).first() %}
              <i id='{{rec.author.id}}' class="follow-button font-link fa fa-heart fa-2x"></i>
            {% else %}
              <i id='{{rec.author.id}}' class='follow-button font-link fa fa-heart-o fa-2x'></i>
            {% endif %}
          {% endif %}
          <a href="{{url_for('personal.profile', id=rec.author_id)}}">
            {{rec.author.username}}
          </a>
        </li>
        <li>
          {% if rec.verification != 0 %}
            Public
          {% else %}
            Private
          {% endif %}
        </li>
        <li>
          {{moment(rec.timestamp).format('MMMM Do YYYY, h:mm:ss a')}}
        </li>
        <li class='reckoner'>
          Comments: {{rec.comments.filter_by(verification=1).count()
          + rec.comments.filter_by(verification=2).count()}}
        </li>
        {% if current_user.id == rec.author_id and rec.new_comment == True %}
          <li class='reckoner'>
            New Comment!
          </li>
        {% endif %}
        {% if attributes or rec.author_id==current_user.id %}
          <li>
            {% if rec.author_id==current_user.id %}
              <a class='icon-link' href="{{url_for('personal.edit', post_id=rec.id, next=link)}}">
                <i class='font-link fa fa-pencil-square-o fa-2x'></i>
              </a>
            {% endif %}
            {% if attributes %}
              <i id='{{rec.id}}' class='{{link}} font-link toggle-comments fa fa-comments-o fa-2x'></i>
              <i class='font-link toggle-show fa fa-arrows-v fa-2x'></i>
            {% endif %}
          </li>
        {% endif %}
      </ul>
    </div><!--post-header-->
    <p class='post-text'>
      {{rec.text}}
    </p>
  </div><!--single-post-->
  <br/>
{% endmacro %}

{% macro initialize_recs(display, moment, current_user, attributes=True) %}
  {{ajax(display, moment, current_user, attributes)}}
  {% if display.pages != display.page and display.pages != 0 %}
    <p id='ajax-recs' class='load-more'>Load More</p>
  {% endif %}
  <script src="{{url_for('static', filename='js/macros/rec.js')}}"></script>
  <script src="{{url_for('static', filename='js/macros/comment.js')}}"></script>
{% endmacro %}

{% macro ajax(display, moment, current_user, attributes=True, link=request.url) %}
  {% for rec in display.items %}
    {{render_rec(rec, moment, current_user, attributes, link)}}
  {% endfor %}
{% endmacro %}

{% macro search_initialize() %}
  <p id='ajax-recs' class='load-more'>Load More</p>
  <script src="{{url_for('static', filename='js/macros/rec.js')}}"></script>
{% endmacro %}