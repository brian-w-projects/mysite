{{moment.include_moment()}}

{% macro render_post(com) %}
  {% if com.verification != 0 %}
    <div class='rec1'>
      <div class='postHeaderDiv'>
        <a href="{{url_for('personal.profile', id=com.comment_by)}}">
          <p class='postHeader special-link'>
            {{com.comm.username}}
          </p>
        </a>
        <p class='postHeader'>
          {{moment(com.timestamp).format('MMMM Do YYYY, h:mm:ss a')}}
        </p>
        {% if current_user.is_authenticated %}
          {% if current_user.posts.filter_by(id=com.posted_on).first() %}
            <a href="{{url_for('personal.comment_delete', id=com.id)}}">
              <p class='postHeader special-link'>
                Delete
              </p>
            </a>
          {% endif %}
          {% if current_user.id == com.comment_by %}
            <a href="{{url_for('personal.comment_edit', id=com.id)}}">
              <p class='postHeader special-link'>
                Edit
              </p>
            </a>
          {% endif %}
        {% endif %}
        <a href="{{url_for('main.highlight', id=com.posted_on)}}">
          <p class=' rec postHeader special-link'>
            Rec
          </p>
        </a>
      </div><!--postHeaderDiv-->
      <p class='postText'>
        {{com.comment}}
      </p>
    </div><!--rec1-->
    <br/>
  {% endif %}
{% endmacro %}

{% macro initialize_comments(d_c) %}
  {% for com in d_c %}
    {{render_post(com)}}
  {% endfor %}
  {% if d_c|length == current_user.display %}
    <a><p id='ajax_comments' class='loadMoreCom special-link'>Load More</p></a>
  {% endif %}
  <script src="{{url_for('static', filename='js/speciality/ajax_comment_js.js')}}"></script>
{% endmacro %}

{% for com in d_c %}
  {{render_post(com)}}
{% endfor %}
{% if d_c|length != current_user.display %}
  <em class='emptyCom'></em>
{% endif %}